<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero Interactivo - Plan de Desarrollo Municipal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfcf9; /* Mantengo este como fondo general, puedes cambiarlo si prefieres */
        }
        /* Colores de la paleta oficial */
        /* #474C55 - Gris oscuro c치lido */
        /* #727372 - Gris medio neutro */
        /* #B2B6AF - Gris claro verdoso */
        /* #130D0E - Negro casi absoluto */

        .active-nav {
            background-color: #474C55 !important; /* Usamos gris oscuro de la paleta */
            color: #B2B6AF !important; /* Usamos gris claro para el texto */
            box-shadow: 0 4px 14px 0 rgba(71, 76, 85, 0.4); /* Sombra acorde al color */
        }
        .nav-item {
            transition: all 0.3s ease;
            background-color: white; /* Botones inactivos en blanco */
            color: #474C55; /* Texto de botones inactivos en gris oscuro */
            border-2 border-transparent;
            box-shadow: 0 2px 8px 0 rgba(0,0,0,0.05);
        }
        .nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px 0 rgba(0,0,0,0.1);
            border-color: #727372; /* Borde gris medio al pasar el mouse */
        }
        /* Ajuste de color para el t칤tulo principal si lo deseas */
        .text-main-title {
            color: #130D0E; /* Negro para el t칤tulo principal */
        }
        /* Ajuste de color para los subt칤tulos de contenido */
        .text-content-title {
            color: #474C55; /* Gris oscuro para t칤tulos de contenido */
        }
        /* Ajuste de color para texto general */
        .text-general {
            color: #727372; /* Gris medio para texto general */
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body class="text-general">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-main-title">Encuesta de Percepci칩n Ciudadana</h1>
            <p class="mt-2 text-lg text-general">Exploraci칩n Interactiva del Plan Municipal de Desarrollo</p>
        </header>

        <nav class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
            <button id="nav-latido1" class="nav-item p-4 rounded-lg shadow-md text-center font-semibold">
                <span class="text-2xl block mb-1">仇벒잺</span>
                Combate a la Corrupci칩n
            </button>
            <button id="nav-latido2" class="nav-item p-4 rounded-lg shadow-md text-center font-semibold">
                <span class="text-2xl block mb-1">游뱋</span>
                Inclusi칩n Social
            </button>
            <button id="nav-latido3" class="nav-item p-4 rounded-lg shadow-md text-center font-semibold">
                <span class="text-2xl block mb-1">游댢</span>
                Servicios P칰blicos
            </button>
            <button id="nav-latido4" class="nav-item p-4 rounded-lg shadow-md text-center font-semibold">
                <span class="text-2xl block mb-1">游늳</span>
                Desarrollo Econ칩mico
            </button>
        </nav>

        <main class="bg-white p-6 rounded-xl shadow-lg">
            <div id="main-content" class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                <div class="order-2 lg:order-1">
                    <h2 id="content-title" class="text-2xl font-bold text-content-title mb-4"></h2>
                    <p id="content-description" class="text-general mb-6"></p>
                    <div id="content-dimensions" class="space-y-4 max-h-[450px] overflow-y-auto pr-4">
                    </div>
                </div>
                <div class="order-1 lg:order-2">
                    <div class="chart-container">
                        <canvas id="mainChart"></canvas>
                    </div>
                    <div class="text-center mt-4">
                        <button id="downloadChartBtn" class="bg-[#474C55] hover:bg-[#727372] text-[#B2B6AF] font-bold py-2 px-4 rounded-lg shadow-md transition-colors duration-300">
                            Descargar Gr치fico
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <footer class="text-center mt-10 text-gray-500 text-sm">
            <p>H. Ayuntamiento de G칩mez Palacio</p>
        </footer>

    </div>

    <script>
        const surveyData = {
            latido1: {
                title: "Latido 1: Combate Frontal a la Corrupci칩n",
                description: "Este eje se enfoca en medir la percepci칩n ciudadana sobre la honestidad, eficiencia y transparencia en el gobierno municipal. Eval칰a desde el comportamiento de los funcionarios hasta la facilidad para realizar tr치mites.",
                chartData: {
                    labels: ["Capacitaci칩n Policial", "Tr치mites Simples", "Sanci칩n a Corrupci칩n", "Vigilancia Interna", "Transparencia"],
                    data: [2.67, 3.17, 2.65, 3.1, 3.1],
                },
                dimensions: [
                    { name: "Capacitaci칩n al personal de Tr치nsito y Polic칤a", questions: ["Conf칤o en que los agentes de tr치nsito y polic칤a de la ciudad act칰an con honestidad.", "El trato que he recibido por parte del personal de tr치nsito y polic칤a ha sido respetuoso y profesional.", "Considero que los agentes de tr치nsito y polic칤a conocen y aplican correctamente el reglamento."] },
                    { name: "Simplificaci칩n de tr치mites administrativos", questions: ["Realizar un tr치mite en el ayuntamiento es un proceso r치pido y sencillo.", "La informaci칩n que se me ha proporcionado para realizar tr치mites municipales ha sido clara y suficiente.", "He tenido que dar vueltas innecesarias o me han solicitado requisitos extra al realizar un tr치mite en el ayuntamiento."] },
                    { name: "Sanci칩n a actos de corrupci칩n", questions: ["La corrupci칩n es un problema frecuente en el gobierno municipal.", "Creo que actualmente existen consecuencias reales para los funcionarios p칰blicos que cometen actos de corrupci칩n.", "Conf칤o en que, si denuncio un acto de corrupci칩n, las autoridades tomar치n medidas efectivas."] },
                    { name: "Vigilancia al personal del ayuntamiento", questions: ["Percibo que el personal del ayuntamiento trabaja de manera eficiente y comprometida.", "Considero que existe una supervisi칩n adecuada sobre el trabajo de los empleados municipales."] },
                    { name: "Transparencia y acceso a la informaci칩n", questions: ["Es f치cil encontrar y consultar informaci칩n sobre las acciones y el gasto del gobierno municipal.", "El gobierno municipal comunica de forma clara y oportuna sus decisiones importantes."] }
                ]
            },
            latido2: {
                title: "Latido 2: Inclusi칩n y Acercamiento Social",
                description: "Este eje mide c칩mo se sienten los ciudadanos respecto a la equidad en la atenci칩n municipal, la seguridad en sus comunidades y la calidad de los espacios p칰blicos que fomentan la convivencia.",
                chartData: {
                    labels: ["Atenci칩n a Colonias", "Programas Comunitarios", "Seguridad", "Entorno Urbano", "Infraestructura Inclusiva"],
                    data: [2.68, 2.96, 2.84, 2.28, 2.25],
                },
                dimensions: [
                    { name: "Atenci칩n a colonias y ejidos", questions: ["Siento que el gobierno municipal le da a mi colonia/ejido la misma atenci칩n que a otras zonas de la ciudad.", "La respuesta del ayuntamiento a los problemas que he reportado en mi comunidad ha sido r치pida."] },
                    { name: "Programas y campa침as comunitarias", questions: ["El gobierno municipal trae suficientes programas (de salud, cultura, deporte) directamente a mi colonia/ejido.", "Me entero f치cilmente de los eventos, programas y apoyos que ofrece el ayuntamiento."] },
                    { name: "Seguridad y polic칤a de proximidad", questions: ["Me siento seguro caminando por mi colonia.", "Veo patrullajes de la polic칤a con frecuencia en mi zona.", "Los polic칤as que patrullan mi comunidad se muestran cercanos y accesibles para los vecinos."] },
                    { name: "Entorno urbano (parques, calles, iluminaci칩n)", questions: ["El estado general de las calles y banquetas en mi colonia es bueno.", "Los parques y espacios p칰blicos cercanos a mi casa est치n limpios y bien cuidados.", "La iluminaci칩n en las calles de mi colonia es suficiente y funciona correctamente."] },
                    { name: "Infraestructura inclusiva", questions: ["Es f치cil para una persona en silla de ruedas, con andador o carriola moverse por las banquetas de la ciudad.", "Los edificios p칰blicos y el transporte cuentan con los accesos necesarios (rampas, elevadores) para todos."] }
                ]
            },
            latido3: {
                title: "Latido 3: Mejora en los Servicios P칰blicos",
                description: "Este eje se centra en la calidad y eficiencia de los servicios b치sicos que impactan directamente la vida diaria de los ciudadanos, como el agua potable, la recolecci칩n de basura y el alumbrado p칰blico.",
                chartData: {
                    labels: ["Agua Potable", "Recolecci칩n de Basura", "Drenaje", "Parques y Plazas", "Alumbrado"],
                    data: [3.3, 3.46, 2.75, 2.53, 2.95],
                },
                dimensions: [
                    { name: "Abasto de agua potable", questions: ["El suministro de agua potable en mi hogar es constante y sin interrupciones.", "La presi칩n del agua que llega a mi casa es suficiente para mis necesidades diarias."] },
                    { name: "Recolecci칩n de basura", questions: ["El cami칩n de la basura pasa puntualmente y con la frecuencia necesaria por mi calle.", "Es com칰n ver basura acumulada en las calles de mi colonia."] },
                    { name: "Drenaje y alcantarillado", questions: ["Cuando llueve, las calles de mi colonia se encharcan o inundan con facilidad.", "He experimentado problemas de malos olores o brotes de aguas negras provenientes del drenaje en mi zona."] },
                    { name: "Mantenimiento de parques y plazas", questions: ["El ayuntamiento le da mantenimiento constante a las 치reas verdes y al mobiliario de los parques p칰blicos.", "Los juegos infantiles en los parques cercanos a mi casa son seguros y est치n en buen estado."] },
                    { name: "Alumbrado p칰blico", questions: ["En mi colonia hay muchas l치mparas del alumbrado p칰blico que no funcionan.", "Cuando se reporta una l치mpara fundida, el ayuntamiento la repara en poco tiempo."] }
                ]
            },
            latido4: {
                title: "Latido 4: Desarrollo Econ칩mico y Oportunidades",
                description: "Este eje explora la percepci칩n sobre el ambiente de negocios, la creaci칩n de empleos, el apoyo a emprendedores y la promoci칩n de la ciudad para atraer inversiones y turismo.",
                chartData: {
                    labels: ["Atracci칩n de Inversiones", "Generaci칩n de Empleos", "Apoyo a Emprendedores", "Apertura de Empresas", "Promoci칩n Tur칤stica"],
                    data: [3.04, 2.31, 2.76, 2.89, 2.83],
                },
                dimensions: [
                    { name: "Atracci칩n de inversiones", questions: ["Percibo que constantemente se est치n abriendo nuevas empresas y negocios en G칩mez Palacio.", "Considero que la ciudad es atractiva para que nuevas empresas quieran instalarse aqu칤."] },
                    { name: "Generaci칩n de empleos", questions: ["En G칩mez Palacio es f치cil encontrar oportunidades de trabajo bien pagado.", "Las personas que conozco que buscan empleo lo encuentran r치pidamente."] },
                    { name: "Apoyo a emprendedores y microempresas", questions: ["El gobierno municipal ofrece apoyos reales y 칰tiles para quienes quieren iniciar o hacer crecer un negocio.", "Es f치cil para un emprendedor obtener la informaci칩n y la ayuda que necesita por parte del municipio."] },
                    { name: "Facilidad para apertura de empresas", questions: ["Los tr치mites municipales para abrir un nuevo negocio son claros, r치pidos y sencillos.", "He escuchado que es muy complicado y tardado abrir una empresa por los requisitos del ayuntamiento."] },
                    { name: "Promoci칩n tur칤stica", questions: ["El gobierno municipal hace un buen trabajo para dar a conocer los lugares de inter칠s de la ciudad.", "Considero que se aprovecha bien el potencial tur칤stico de G칩mez Palacio."] }
                ]
            }
        };

        let currentChart = null;
        const chartCanvas = document.getElementById('mainChart').getContext('2d');
        const contentTitle = document.getElementById('content-title');
        const contentDescription = document.getElementById('content-description');
        const contentDimensions = document.getElementById('content-dimensions');
        const navButtons = document.querySelectorAll('.nav-item');
        const downloadChartBtn = document.getElementById('downloadChartBtn');
        let currentLatidoId = 'latido1'; // Para saber qu칠 latido se est치 mostrando y nombrarlo al descargar

        // Colores de la paleta oficial para Chart.js
        const primaryColor = '#474C55'; // Gris oscuro c치lido para la l칤nea del radar
        const accentColor = '#B2B6AF'; // Gris claro verdoso para el 치rea rellenada
        const textColor = '#130D0E'; // Negro para el texto de las etiquetas del gr치fico
        const gridColor = '#72737233'; // Gris medio con transparencia para las l칤neas de la cuadr칤cula

        function updateChart(latidoId) {
            currentLatidoId = latidoId; // Actualiza el latido actual
            const chartConfig = surveyData[latidoId].chartData;
            if (currentChart) {
                currentChart.destroy();
            }
            currentChart = new Chart(chartCanvas, {
                type: 'radar',
                data: {
                    labels: chartConfig.labels,
                    datasets: [{
                        label: 'Calificaci칩n Promedio',
                        data: chartConfig.data,
                        fill: true,
                        backgroundColor: accentColor + '40', // Gris claro verdoso con 25% de opacidad
                        borderColor: primaryColor,
                        pointBackgroundColor: primaryColor,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: primaryColor
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: gridColor },
                            grid: { color: gridColor },
                            pointLabels: { 
                                font: { size: 12 },
                                color: textColor
                            },
                            ticks: {
                                backdropColor: 'rgba(255, 255, 255, 0.75)', // Fondo blanco para los n칰meros de los ticks
                                color: primaryColor, // Color de los n칰meros de los ticks
                                stepSize: 1,
                            },
                            suggestedMin: 0,
                            suggestedMax: 5
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: primaryColor // Color del texto de la leyenda
                            }
                        }
                    }
                }
            });
        }

        function updateContent(latidoId) {
            const latidoData = surveyData[latidoId];
            contentTitle.textContent = latidoData.title;
            contentDescription.textContent = latidoData.description;
            
            contentDimensions.innerHTML = '';
            latidoData.dimensions.forEach(dim => {
                const questionsList = dim.questions.map(q => `<li class="text-sm text-general ml-4 list-disc">${q}</li>`).join('');
                const dimensionEl = document.createElement('div');
                dimensionEl.className = 'p-4 border rounded-lg bg-gray-50/50'; /* Fondo ligeramente diferente para las dimensiones */
                dimensionEl.innerHTML = `
                    <h3 class="font-semibold text-content-title">${dim.name}</h3>
                    <ul class="mt-2 space-y-1">${questionsList}</ul>
                `;
                contentDimensions.appendChild(dimensionEl);
            });
        }
        
        function setActiveNav(latidoId) {
            navButtons.forEach(button => {
                button.classList.remove('active-nav');
                // Restablecer estilos predeterminados
                button.style.backgroundColor = 'white';
                button.style.color = '#474C55';
                if (button.id === `nav-${latidoId}`) {
                    button.classList.add('active-nav');
                }
            });
        }

        // Funci칩n para descargar el gr치fico
        function downloadChart() {
            if (currentChart) {
                const link = document.createElement('a');
                link.download = `grafico_${currentLatidoId}.png`;
                link.href = currentChart.toBase64Image();
                link.click();
            }
        }

        function displayLatido(latidoId) {
            updateContent(latidoId);
            updateChart(latidoId);
            setActiveNav(latidoId);
        }

        document.getElementById('nav-latido1').addEventListener('click', () => displayLatido('latido1'));
        document.getElementById('nav-latido2').addEventListener('click', () => displayLatido('latido2'));
        document.getElementById('nav-latido3').addEventListener('click', () => displayLatido('latido3'));
        document.getElementById('nav-latido4').addEventListener('click', () => displayLatido('latido4'));
        downloadChartBtn.addEventListener('click', downloadChart); // Asignar el evento al bot칩n

        window.addEventListener('load', () => {
            displayLatido('latido1');
        });

    </script>
</body>
</html>
